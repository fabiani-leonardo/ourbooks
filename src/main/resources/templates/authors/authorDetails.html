<!DOCTYPE html>
<html>

<head>
	<title th:text="${author.fullName} + ' - Author Details'">Author Details</title>
	<link rel="stylesheet" href="/css/style.css" />
</head>

<body>
	<header>
		<!-- Barra in alto -->
			<div class="barra-superiore">
				<div class="link-superiori">
					<!-- Se l'utente Ã¨ autenticato -->
					<span th:if="${credentials}"> <!-- dal controller sto passando questa variabile offerta da Spring Security 
				che ci fornisce i dati dell'utente autenticato oppure null se non si Ã¨ auteticato' -->
						<span th:text="${credentials.username}"></span> <!-- stampiamo lo username dell'utente autenticato' -->
						<a href="/logout">Logout</a> <!-- diamo all'utente autenticato la possibilitÃ  di uscire dal sistema' -->
					</span>
					<!-- Se l'utente NON Ã¨ autenticato -->
					<span th:if="${credentials == null}"> <!-- Se l'utente non Ã¨ autenticat questo oggetto Ã¨ null -->
						<a href="/login">Login</a> <!-- visto che non Ã¨ autenticato offriamo la possibilitÃ  di loggarsi -->
						<a href="/register">Register</a> <!-- o registrarsi -->
					</span>
				</div>
				<h1 class="logo"><a href="/">OURBOOKS</a></h1>
			</div>
	</header>

	<div class="breadcrumb">
		<a href="/">Home</a> > <a href="/authors">Authors</a> > <span th:text="${author.fullName}"></span>
	</div>

	<div class="author-details">
		<div class="author-image">
			<img th:if="${author.image}" th:src="@{'/images/' + ${author.image}}" th:alt="${author.fullName}" />
			<div th:if="${author.image == null}" class="no-image">ðŸ‘¤</div>
		</div>

		<div class="author-info">
			<h1 th:text="${author.fullName}"></h1>
			
			<div class="author-meta">
				<div th:if="${author.nationality}">
					<strong>nationality:</strong>
					<span th:text="${author.nationality}"></span>
				</div>

				<div th:if="${author.birthDate}">
					<strong>birth date:</strong>
					<span th:text="${#temporals.format(author.birthDate, 'dd/MM/yyyy')}"></span>
				</div>

				<div th:if="${author.deathDate}">
					<strong>death date:</strong>
					<span th:text="${#temporals.format(author.deathDate, 'dd/MM/yyyy')}"></span>
				</div>
			</div>

			<div th:if="${credentials != null and credentials.role == 'ADMIN'}" class="admin-actions">
				<h3>Admin Actions</h3>
				<!-- Per la modifica -->
				<a th:href="@{'/authors/edit/' + ${author.id}}">Modifica autore</a>
				<!-- Per l'eliminazione -->
				<a th:href="@{'/authors/delete/' + ${author.id}}" 
				   onclick="return confirm('Sei sicuro di voler eliminare questo autore?')">Elimina autore</a>
			</div>
		</div>
	</div>

	<div th:if="${author.books != null && !author.books.isEmpty()}" class="books-section">
		<h2>Libri di <span th:text="${author.fullName}"></span></h2>
		<ul class="books-list">
			<li th:each="book : ${author.books}">
				<a th:href="@{'/books/' + ${book.id}}" 
				   th:text="${book.title} + ' (' + ${book.publicationYear} + ')'"></a>
			</li>
		</ul>
	</div>
</body>

</html>