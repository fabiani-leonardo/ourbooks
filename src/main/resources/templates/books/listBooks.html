<!DOCTYPE html>
<html>

<head>
	<title>Books</title>
	<link rel="stylesheet" href="/css/style.css" />
</head>

<body>
	<header>
		<!-- Barra in alto -->
			<div class="barra-superiore">
				<div class="link-superiori">
					<!-- Se l'utente √® autenticato -->
					<span th:if="${credentials}"> <!-- dal controller sto passando questa variabile offerta da Spring Security 
				che ci fornisce i dati dell'utente autenticato oppure null se non si √® auteticato' -->
						<span th:text="${credentials.username}"></span> <!-- stampiamo lo username dell'utente autenticato' -->
						<a href="/logout">Logout</a> <!-- diamo all'utente autenticato la possibilit√† di uscire dal sistema' -->
					</span>
					<!-- Se l'utente NON √® autenticato -->
					<span th:if="${credentials == null}"> <!-- Se l'utente non √® autenticat questo oggetto √® null -->
						<a href="/login">Login</a> <!-- visto che non √® autenticato offriamo la possibilit√† di loggarsi -->
						<a href="/register">Register</a> <!-- o registrarsi -->
					</span>
				</div>
				<h1 class="logo"><a href="/">OURBOOKS</a></h1>
			</div>
	</header>

	<h1>Books</h1>
	<div class="action-buttons">
		<!-- Link per la ricerca - visibile a tutti -->
		<a class="button" href="/books/find">üîç Search Books</a>
		
		<!-- Link per aggiungere libro - solo admin -->
		<div th:if="${credentials != null and credentials.role == 'ADMIN'}">
			<a class="button" href="/books/add">add new book</a>
		</div>
	</div>
	
	<div th:if="${books==null || books.isEmpty()}">No books here :/</div>
	<ul class="bookList">
		<li th:each="book : ${books}">
			<a th:href="@{'/books' + '/' + ${book.id}}"
				th:text="|${book.title} (${book.publicationYear})|"></a>
		</li>
	</ul>
</body>

</html>